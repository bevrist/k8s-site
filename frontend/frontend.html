<!DOCTYPE html>
<html>

<head>
  <style>
    table {
      font-family: arial, sans-serif;
      border-collapse: collapse;
      width: 100%;
    }

    td,
    th {
      border: 1px solid #dddddd;
      text-align: left;
      padding: 8px;
    }

    #chart-title {
      background-color: #d62121e5;
      color: #ffffff;
    }

    tr:nth-child(odd) {
      background-color: #dddddd;
    }
  </style>
</head>

<body>
  <h2>Crap ui page</h2>

  <!-- Input Form -->
  <form method="POST">
    <label for="weight">Weight (lbs):</label><br>
    <input type="number" id="weight" name="weight" placeholder="150" required><br>
    <label for="height">Height (inches):</label><br>
    <input type="number" id="height" name="height" placeholder="71" required><br>
    <label for="waist">Waist cir. (inches):</label><br>
    <input type="number" id="waist" name="waist" placeholder="55">
    <br><br>
    <input type="submit" value="Submit">
  </form>

  <!-- Output Chart -->
  <br><br>
  <table id="table">
    <tr id="chart-title">
      <th>High Day</th>
      <th></th>
      <th></th>
    </tr>
    <tr>
      <th>Macros</th>
      <th>Grams</th>
      <th>% Ratio</th>
    </tr>
    <tr>
      <td>Protein</td>
      <td id="a1">235</td>
      <td id="a2">38%</td>
    </tr>
    <tr>
      <td>Carbs</td>
      <td>234</td>
      <td>37%</td>
    </tr>
    <tr>
      <td>Fat</td>
      <td>69</td>
      <td>25%</td>
    </tr>
    <tr>
      <td>Calories</td>
      <td>2497</td>
      <td>100%</td>
    </tr>
  </table>
  <br>
  <!--TODO remove-->
  <button onclick="update()">Update</button>

  <!-- Debug show raw json response -->
  <p id="aa"></p>
</body>

</html>

<script>
  function update() {
    var tableRow = document.getElementById("table").insertRow();

    tableRow.insertCell(0).appendChild(document.createTextNode("aaaaaa"));
    tableRow.insertCell(1).appendChild(document.createTextNode("bbbbb"));
    tableRow.insertCell(2).appendChild(document.createTextNode("cccc"));
  }

  //get json object of chart data
  fetch("{{.BackendURL}}").then(function (response) {
    response.json().then(function (data) {
      updateChart(data);
    });
  });

  function updateChart(data) {
    document.getElementById("a1").innerHTML = data[0].FirstName;
    document.getElementById("a2").innerHTML = data[0].Weight;
    document.getElementById("aa").innerHTML = JSON.stringify(data);
  }
</script>